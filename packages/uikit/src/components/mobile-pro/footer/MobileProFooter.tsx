import { IonFooter, IonToolbar } from '@ionic/react';
import styled from 'styled-components';
import { useActiveAccount } from '../../../state/wallet';
import { WalletEmoji } from '../../shared/emoji/WalletEmoji';
import { Label2 } from '../../Text';
import { ChevronDownIcon } from '../../Icon';
import { useNavigate } from '../../../hooks/router/useNavigate';
import { AppRoute } from '../../../libs/routes';
import { useMenuController } from '../../../hooks/ionic';

const FooterContainer = styled.div`
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0 35px;
`;

const Tab = styled.div`
    padding: 18px;
    flex-shrink: 0;
    color: ${p => p.theme.iconSecondary};
`;

const AccountMenu = styled.div`
    padding: 10px;
    border-radius: 22px;
    background-color: ${p => p.theme.buttonTertiaryBackground};
    display: flex;
    gap: 6px;
    align-items: center;

    svg {
        flex-shrink: 0;
        color: ${p => p.theme.iconSecondary};
    }
`;

const AccountMenuWrapper = styled.div`
    padding: 8px 12px 16px;
`;

const IonToolbarStyled = styled(IonToolbar)`
    padding-bottom: min(10px, env(safe-area-inset-bottom, 0px)) !important;
`;

export const MobileProFooter = () => {
    const account = useActiveAccount();
    const navigate = useNavigate();
    const leftMenuController = useMenuController('aside-nav');
    const rightMenuController = useMenuController('wallet-nav');

    const name = account.type === 'mam' ? account.activeDerivation.name : account.name;
    const emoji = account.type === 'mam' ? account.activeDerivation.emoji : account.emoji;
    return (
        <IonFooter translucent={true}>
            <IonToolbarStyled>
                <FooterContainer>
                    <Tab onClick={() => navigate(AppRoute.home)}>
                        <HouseIcon />
                    </Tab>
                    <AccountMenuWrapper>
                        <AccountMenu onClick={() => leftMenuController.open()}>
                            <WalletEmoji emoji={emoji} emojiSize="20px" />
                            <Label2>{name}</Label2>
                            <ChevronDownIcon />
                        </AccountMenu>
                    </AccountMenuWrapper>
                    <Tab onClick={() => rightMenuController.open()}>
                        <BlocksIcon />
                    </Tab>
                </FooterContainer>
            </IonToolbarStyled>
        </IonFooter>
    );
};

const HouseIcon = () => {
    return (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 28 28"
            fill="none"
        >
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M14.48 3.89824C14.1648 3.82037 13.8355 3.82038 13.5203 3.89827C13.3139 3.9493 13.0659 4.07493 12.6631 4.42202C12.2492 4.77858 11.7577 5.29083 11.0375 6.04381L5.37299 11.9658C4.66594 12.705 4.44643 12.9464 4.30141 13.2143C4.2105 13.3823 4.13914 13.5602 4.08872 13.7444C4.0083 14.0383 4.00007 14.3645 4.00007 15.3874V19.8999C4.00007 20.9013 4.00112 21.5821 4.05084 22.105C4.09914 22.613 4.18621 22.8677 4.29479 23.0449C4.4597 23.314 4.68596 23.5402 4.95507 23.7052C5.13224 23.8137 5.38699 23.9008 5.89498 23.9491C6.41785 23.9988 7.09867 23.9999 8.10007 23.9999H9.00152L9.00065 18.0006C9.00025 15.2389 11.2389 12.9999 14.0006 12.9999C16.7618 12.9999 19.0002 15.238 19.0007 17.9991L19.0015 23.9999H19.9008C20.902 23.9999 21.5828 23.9988 22.1056 23.9491C22.6135 23.9008 22.8682 23.8138 23.0454 23.7052C23.3145 23.5403 23.5407 23.3141 23.7057 23.045C23.8142 22.8679 23.9013 22.6132 23.9497 22.1052C23.9995 21.5824 24.0006 20.9017 24.0008 19.9004L24.0014 15.3879C24.0015 14.3647 23.9933 14.0385 23.9129 13.7445C23.8625 13.5602 23.7911 13.3823 23.7001 13.2143C23.5551 12.9463 23.3355 12.7048 22.6282 11.9655L16.963 6.04359C16.2427 5.29066 15.7511 4.77845 15.3373 4.42192C14.9344 4.07486 14.6864 3.94925 14.48 3.89824ZM17.0015 23.9999L17.0006 17.9994C17.0004 16.3428 15.6573 14.9999 14.0006 14.9999C12.3436 14.9999 11.0004 16.3433 11.0006 18.0003L11.0015 23.9999H17.0015ZM13.0404 1.9567C13.6707 1.80092 14.3294 1.80089 14.9597 1.95663C15.5991 2.11461 16.1274 2.46282 16.6426 2.90664C17.1385 3.33379 17.6964 3.91702 18.3738 4.62515L18.4081 4.66104L24.0734 10.5829C24.102 10.6128 24.1303 10.6424 24.1582 10.6715C24.7465 11.2859 25.1701 11.7284 25.4591 12.2624C25.6227 12.5648 25.7512 12.885 25.842 13.2167C26.0022 13.8024 26.0019 14.4149 26.0014 15.2655C26.0014 15.3059 26.0014 15.3468 26.0014 15.3882L26.0008 19.9007L26.0007 19.9491C26.0006 20.8898 26.0005 21.6661 25.9407 22.2948C25.8784 22.9491 25.7444 23.546 25.4108 24.0902C25.081 24.6283 24.6285 25.0808 24.0903 25.4105C23.5461 25.744 22.9492 25.8779 22.2949 25.9401C21.6662 25.9999 20.8899 25.9999 19.9492 25.9999H19.9008H18.0017H10.0017H8.10007H8.05165C7.1108 25.9999 6.33442 25.9999 5.70567 25.9401C5.05128 25.8779 4.45431 25.7439 3.91007 25.4104C3.37185 25.0806 2.91933 24.6281 2.58951 24.0899C2.256 23.5456 2.12204 22.9487 2.05982 22.2943C2.00003 21.6655 2.00005 20.8891 2.00007 19.9483L2.00007 19.8999V15.3874C2.00007 15.3459 2.00005 15.3051 2.00003 15.2647C1.99968 14.4143 1.99943 13.802 2.15965 13.2165C2.2504 12.8849 2.37885 12.5648 2.54249 12.2624C2.83141 11.7286 3.25486 11.2862 3.84292 10.6719C3.87081 10.6428 3.89907 10.6133 3.9277 10.5834L9.59222 4.66137L9.62652 4.6255C10.3039 3.91732 10.8618 3.33403 11.3576 2.90683C11.8728 2.46297 12.4011 2.11473 13.0404 1.9567Z"
                fill="currentColor"
            />
        </svg>
    );
};

const BlocksIcon = () => {
    return (
        <svg
            xmlns="http://www.w3.org/2000/svg"
            width="28"
            height="28"
            viewBox="0 0 28 28"
            fill="none"
        >
            <path
                fillRule="evenodd"
                clipRule="evenodd"
                d="M7.49844 1.90039C4.40564 1.90039 1.89844 4.4076 1.89844 7.50039C1.89844 10.5932 4.40564 13.1004 7.49844 13.1004C10.5912 13.1004 13.0984 10.5932 13.0984 7.50039C13.0984 4.4076 10.5912 1.90039 7.49844 1.90039ZM3.89844 7.50039C3.89844 5.51217 5.51021 3.90039 7.49844 3.90039C9.48666 3.90039 11.0984 5.51217 11.0984 7.50039C11.0984 9.48862 9.48666 11.1004 7.49844 11.1004C5.51021 11.1004 3.89844 9.48862 3.89844 7.50039ZM6.99844 15.0004L6.95828 15.0004H6.95821H6.95819H6.95817C6.29235 15.0004 5.73286 15.0004 5.27501 15.0378C4.79629 15.0769 4.34133 15.1618 3.90947 15.3819C3.2509 15.7174 2.71547 16.2529 2.37992 16.9114C2.15987 17.3433 2.07493 17.7982 2.03582 18.277C1.99841 18.7348 1.99842 19.2944 1.99844 19.9602L1.99844 20.0004V21.0004L1.99844 21.0406C1.99842 21.7064 1.99841 22.2659 2.03582 22.7238C2.07493 23.2025 2.15987 23.6575 2.37992 24.0894C2.71547 24.7479 3.2509 25.2834 3.90947 25.6189C4.34133 25.839 4.79629 25.9239 5.27501 25.963C5.73289 26.0004 6.29242 26.0004 6.9583 26.0004H6.99844H7.99844H8.03857C8.70446 26.0004 9.26399 26.0004 9.72187 25.963C10.2006 25.9239 10.6555 25.839 11.0874 25.6189C11.746 25.2834 12.2814 24.7479 12.617 24.0894C12.837 23.6575 12.9219 23.2025 12.9611 22.7238C12.9985 22.2659 12.9985 21.7064 12.9984 21.0405V21.0004V20.0004V19.9603C12.9985 19.2944 12.9985 18.7348 12.9611 18.277C12.9219 17.7982 12.837 17.3433 12.617 16.9114C12.2814 16.2529 11.746 15.7174 11.0874 15.3819C10.6555 15.1618 10.2006 15.0769 9.72187 15.0378C9.26402 15.0004 8.70453 15.0004 8.03871 15.0004H8.03869H8.03867H8.0386L7.99844 15.0004H6.99844ZM4.81745 17.1639C4.92037 17.1114 5.08284 17.0601 5.43788 17.0311C5.80459 17.0012 6.28187 17.0004 6.99844 17.0004H7.99844C8.71501 17.0004 9.19229 17.0012 9.559 17.0311C9.91404 17.0601 10.0765 17.1114 10.1794 17.1639C10.4617 17.3077 10.6911 17.5372 10.8349 17.8194C10.8874 17.9223 10.9387 18.0848 10.9677 18.4398C10.9977 18.8065 10.9984 19.2838 10.9984 20.0004V21.0004C10.9984 21.717 10.9977 22.1942 10.9677 22.561C10.9387 22.916 10.8874 23.0785 10.8349 23.1814C10.6911 23.4636 10.4617 23.6931 10.1794 23.8369C10.0765 23.8893 9.91404 23.9406 9.559 23.9697C9.19229 23.9996 8.71501 24.0004 7.99844 24.0004H6.99844C6.28187 24.0004 5.80459 23.9996 5.43788 23.9697C5.08284 23.9406 4.92037 23.8893 4.81745 23.8369C4.53521 23.6931 4.30574 23.4636 4.16193 23.1814C4.10949 23.0785 4.05819 22.916 4.02918 22.561C3.99922 22.1942 3.99844 21.717 3.99844 21.0004V20.0004C3.99844 19.2838 3.99922 18.8065 4.02918 18.4398C4.05819 18.0848 4.10949 17.9223 4.16193 17.8194C4.30574 17.5372 4.53521 17.3077 4.81745 17.1639ZM19.9583 2.00039L19.9984 2.00039H20.9984L21.0386 2.00039C21.7045 2.00038 22.264 2.00036 22.7219 2.03777C23.2006 2.07689 23.6555 2.16183 24.0874 2.38187C24.746 2.71743 25.2814 3.25286 25.617 3.91143C25.837 4.34328 25.9219 4.79824 25.9611 5.27697C25.9985 5.73484 25.9985 6.29438 25.9984 6.96026V7.00039V8.00039V8.04053C25.9985 8.70641 25.9985 9.26594 25.9611 9.72382C25.9219 10.2025 25.837 10.6575 25.617 11.0894C25.2814 11.7479 24.746 12.2834 24.0874 12.6189C23.6555 12.839 23.2006 12.9239 22.7219 12.963C22.264 13.0004 21.7045 13.0004 21.0386 13.0004H20.9984H19.9984H19.9583C19.2924 13.0004 18.7329 13.0004 18.275 12.963C17.7963 12.9239 17.3413 12.839 16.9095 12.6189C16.2509 12.2834 15.7155 11.7479 15.3799 11.0894C15.1599 10.6575 15.0749 10.2025 15.0358 9.72382C14.9984 9.26596 14.9984 8.70645 14.9984 8.04059V8.04057V8.04055L14.9984 8.00039V7.00039L14.9984 6.96023V6.96021V6.96019C14.9984 6.29434 14.9984 5.73483 15.0358 5.27697C15.0749 4.79824 15.1599 4.34328 15.3799 3.91143C15.7155 3.25286 16.2509 2.71743 16.9095 2.38187C17.3413 2.16183 17.7963 2.07689 18.275 2.03777C18.7329 2.00036 19.2924 2.00038 19.9583 2.00039ZM18.4379 4.03113C18.0828 4.06014 17.9204 4.11144 17.8175 4.16388C17.5352 4.30769 17.3057 4.53716 17.1619 4.81941C17.1095 4.92233 17.0582 5.08479 17.0292 5.43983C16.9992 5.80654 16.9984 6.28383 16.9984 7.00039V8.00039C16.9984 8.71696 16.9992 9.19424 17.0292 9.56096C17.0582 9.91599 17.1095 10.0785 17.1619 10.1814C17.3057 10.4636 17.5352 10.6931 17.8175 10.8369C17.9204 10.8893 18.0828 10.9406 18.4379 10.9697C18.8046 10.9996 19.2819 11.0004 19.9984 11.0004H20.9984C21.715 11.0004 22.1923 10.9996 22.559 10.9697C22.914 10.9406 23.0765 10.8893 23.1794 10.8369C23.4617 10.6931 23.6911 10.4636 23.8349 10.1814C23.8874 10.0785 23.9387 9.91599 23.9677 9.56096C23.9977 9.19424 23.9984 8.71696 23.9984 8.00039V7.00039C23.9984 6.28383 23.9977 5.80654 23.9677 5.43983C23.9387 5.08479 23.8874 4.92233 23.8349 4.81941C23.6911 4.53716 23.4617 4.30769 23.1794 4.16388C23.0765 4.11144 22.914 4.06014 22.559 4.03113C22.1923 4.00117 21.715 4.00039 20.9984 4.00039H19.9984C19.2819 4.00039 18.8046 4.00117 18.4379 4.03113ZM20.4969 14.9004C17.4041 14.9004 14.8969 17.4076 14.8969 20.5004C14.8969 23.5932 17.4041 26.1004 20.4969 26.1004C23.5897 26.1004 26.0969 23.5932 26.0969 20.5004C26.0969 17.4076 23.5897 14.9004 20.4969 14.9004ZM16.8969 20.5004C16.8969 18.5122 18.5086 16.9004 20.4969 16.9004C22.4851 16.9004 24.0969 18.5122 24.0969 20.5004C24.0969 22.4886 22.4851 24.1004 20.4969 24.1004C18.5086 24.1004 16.8969 22.4886 16.8969 20.5004Z"
                fill="currentColor"
            />
        </svg>
    );
};
